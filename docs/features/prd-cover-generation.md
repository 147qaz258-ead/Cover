# 封面生成功能 PRD

> AI 封面生成器产品需求文档

---

## 目的 Purpose

定义 AI 封面生成器的核心功能需求与验收标准。

## 适用范围 Scope

- 封面生成核心流程
- 多平台适配
- 无限画布模式

## 当前状态 Status

**Active** - v0.1.0 实现中

---

## 1. 背景

### 1.1 问题定义

目标用户：
- 不会设计但需要频繁发布内容的小红书创作者
- 电商商家
- 公众号运营者

核心痛点：
- PS 操作复杂，学习成本高
- 通用 AI 绘图工具自由度过高，难以产出稳定结果
- 不同平台尺寸要求不同，手动适配耗时

### 1.2 解决方案

用户只需输入一段文本，选择风格模板，系统在 30 秒内生成符合平台比例的封面图。

核心理念：
- **结果导向** - 不追求无限自由
- **强约束模板** - 稳定产出"看起来就对"的封面
- **开箱即用** - 复杂功能隐藏在后端

> **证据来源**: [specs/001-ai-cover-generator/spec.md](file:///d:/C_Projects/Cover/specs/001-ai-cover-generator/spec.md) 第 6 行

---

## 2. 用户故事

### 2.1 US-001 智能文本解析与封面生成 (P1)

**场景**: 小红书创作者粘贴一篇完整文章，系统通过 AI 代理链自动解析、提取标题、识别关键点，在 30 秒内生成封面。

**验收标准**:

| 条件 | 操作 | 预期结果 |
|------|------|----------|
| 用户粘贴完整文章 | 点击生成 | AI 代理链解析内容，30 秒内生成封面 |
| 用户只输入标题 | 点击生成 | 跳过内容解析，直接生成封面 |
| 生成完成后 | 点击编辑 | 可修改 AI 提取的标题并重新生成 |

### 2.2 US-002 多平台适配 (P1)

**场景**: 电商商家需要为小红书、公众号、商品主图生成不同比例封面。

**验收标准**:

| 条件 | 操作 | 预期结果 |
|------|------|----------|
| 选择"小红书+公众号" | 生成封面 | 返回两张不同比例但风格一致的封面 |
| 只选择公众号 | 生成封面 | 只返回 900×500 封面 |
| 选择所有平台 | 生成封面 | 返回所有平台适配的封面包 |

### 2.3 US-003 无限画布自由创作 (P2)

**场景**: 高级用户需要更多创作自由，可使用无限画布模式自定义文字位置、颜色等。

**验收标准**:

| 条件 | 操作 | 预期结果 |
|------|------|----------|
| 选择无限画布模式 | 进入编辑界面 | 显示文字位置、颜色等自定义选项 |
| 调整文字位置 | 预览 | 文字按指定位置显示 |
| 选择自定义颜色 | 生成 | 封面使用用户指定配色 |

> **证据来源**: [specs/001-ai-cover-generator/spec.md](file:///d:/C_Projects/Cover/specs/001-ai-cover-generator/spec.md) 第 18-63 行

---

## 3. 功能需求

### 3.1 输入输出

| ID | 需求 |
|----|------|
| FR-001 | 用户可输入文本内容（标题、段落、文章） |
| FR-002 | 提供预定义风格模板 |
| FR-003 | 生成平台特定比例（小红书 9:16、公众号 2.35:1、商品 1:1） |
| FR-004 | 30 秒内完成生成 |

### 3.2 AI 处理

| ID | 需求 |
|----|------|
| FR-011 | 使用 LangChain.js 实现多阶段 AI 管道 |
| FR-012 | 生成过程中展示 AI 解析结果（无需用户确认） |
| FR-013 | 生成后允许用户编辑 AI 生成内容 |
| FR-014 | 使用结构化 Prompt 与标准化返回格式 |
| FR-015 | 针对博客文章提取关键点和生成标题 |

### 3.3 安全与可用性

| ID | 需求 |
|----|------|
| FR-016 | 使用 OpenAI Moderation API 审核用户输入 |
| FR-018 | 实现健康监控，目标 99.5% 可用性 |

> **证据来源**: [specs/001-ai-cover-generator/spec.md](file:///d:/C_Projects/Cover/specs/001-ai-cover-generator/spec.md) 第 78-96 行

---

## 4. 成功指标

| ID | 指标 | 目标 |
|----|------|------|
| SC-001 | 首次生成时间 | 95% 用户在 60 秒内生成首张封面 |
| SC-002 | 平均生成时间 | < 25 秒 |
| SC-003 | 首次通过审核率 | 90% |
| SC-004 | 用户满意度 | > 4.5/5 |
| SC-005 | 系统可用性 | 99.5% (9AM-9PM) |
| SC-006 | 效率提升 | 比传统工具节省 80% 时间 |

> **证据来源**: [specs/001-ai-cover-generator/spec.md](file:///d:/C_Projects/Cover/specs/001-ai-cover-generator/spec.md) 第 112-117 行

---

## 5. 边界情况

| 场景 | 处理方案 |
|------|----------|
| 网络中断 | 任务排队，恢复后自动重试 |
| AI 服务超时 | 降级方案或提示用户重试 |
| 大量并发 | Redis 请求队列管理 |
| 生成失败 | 自动重试策略 |
| 模型限流 | 备用模型切换 |

---

## 证据来源 Evidence

| 信息 | 来源文件 |
|------|----------|
| 用户故事 | `specs/001-ai-cover-generator/spec.md` |
| 功能需求 | `specs/001-ai-cover-generator/spec.md` |
| 成功指标 | `specs/001-ai-cover-generator/spec.md` |

## 相关链接 Related

- [封面生成技术规格](spec-cover-generation.md)
- [封面生成 API](../integrations/api-generate.md)
- [架构原则](../architecture/principles.md)

---

## Changelog

| 日期 | 变更 |
|------|------|
| 2025-12-22 | 初版创建，基于 specs 文档提取 |
